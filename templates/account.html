{% from "macros.html" import field_with_validation with context %}

{% extends "layout.html" %}

{% block content %}
  <div class="content-section">
    <div class="media">
      <img src="{{ image_file }}" alt="User profile" class="rounded-circle account-img">
      <div class="media-body">
        <h2 class="account-heading">{{ current_user.username }}</h2>
        <p class="text-secondary">{{ current_user.email }}</p>
      </div>
    </div>
  </div>
  <div class="content-section">
    <form action="" method="POST" enctype="multipart/form-data">
      {{ form.hidden_tag() }}
      <fieldset class="form-group">
        <legend>{{ title }}</legend>
  
        <div class="form-group">
          {{ field_with_validation(form.username) }}  
        </div>

        <div class="form-group">
          {{ field_with_validation(form.email) }}
        </div>

        <div class="form-group">
          {{ field_with_validation(form.picture, "form-control-file") }}
        </div>
      </fieldset>

      <div class="form-group">
        {{ form.submit(class='btn btn-outline-info') }}
      </div>
    </form>
  </div>
{% endblock %}